{"showCoverPage":false,"bookCover":{"coverDescription":"<p style=\"text-align:center\"></p>"},"chapters":[{"params":{"content":[{"content":{"params":{"text":"<p> </p>\n\n<p><span style=\"font-size:1.5em\">Choosing a task</span></p>\n\n<p>Now that you've seen some of the things a machine learning model can detect, it's time to think of what you want your new model to detect. A simple on/off categorisation is easiest, so here are some suggestions:</p>\n\n<ul>\n\t<li>Is there someone with a red shirt?</li>\n\t<li>Is there a coffee cup?</li>\n\t<li>Is it day or night?</li>\n\t<li>Has the Pi been inverted?</li>\n\t<li>Is the Pi on its side?</li>\n</ul>\n"},"library":"H5P.AdvancedText 1.1","metadata":{"contentType":"Text","license":"U","title":"Untitled Text","authors":[],"changes":[]},"subContentId":"997cabf0-e1ae-420c-bc36-0fa2ebb347ca"},"useSeparator":"auto"}]},"library":"H5P.Column 1.15","subContentId":"a9d1b9f6-50b8-4479-9e19-1a70f40ebe8c","metadata":{"contentType":"Column","license":"U","title":"Choose a Task","authors":[],"changes":[],"extraTitle":"Choose a Task"}},{"params":{"content":[{"content":{"params":{"text":"<p> </p>\n\n<p><span style=\"font-size:1.5em\">Capture training footage</span></p>\n\n<p>Before we can create a new machine learning model, we first need to capture pictures that can be used to train the model. It works best if we use the same camera to capute the training data that we will use to run the predictor, so we need to capture data with the Pi camera and that is what we will do here.</p>\n\n<p>Before taking the photos, consider what you'll need pictures of. The more photos the model has to train, the more accurate it can be. Make sure to take photos of each of the things you're trying to detect, as well as photos with nothing in them so the model can learn what nothing looks like. </p>\n\n<p><span style=\"font-size:1.5em\">Taking Pictures with the Pi</span></p>\n\n<p>With the camera connected to the pi, we can use the <code>raspistill</code> command to capture images. <code>raspistill</code> has the following options that will help us:</p>\n\n<ul>\n\t<li><code>-awb greyworld</code> helps to improve the color in images from our camera (which has no IR filter so lots of extra red gets introduced, particularly outside)</li>\n\t<li><code>-tl 1000</code> take a new image every 1000 milliseconds</li>\n\t<li><code>-t 0</code> don’t timeout, just keep taking images</li>\n\t<li><code>-o captures/img%04d</code> is a code for the image file names that will be used, and specifies what directory the images will be stored in.</li>\n</ul>\n\n<p>The full command to type into the terminal is:</p>\n\n<pre><code>raspistill -awb greyworld -tl 1000 -t 0 -o captures/img%04d.jpg\n</code></pre>\n\n<p>if your camera is upside down, you might want to add <code>-rot 180</code> to rotate the images</p>\n\n<p>This will keep taking photo's forever, stop it by typing Ctrl-C in the terminal. </p>\n"},"library":"H5P.AdvancedText 1.1","metadata":{"contentType":"Text","license":"U","title":"Untitled Text","authors":[],"changes":[]},"subContentId":"19875eb2-f002-4711-9e3b-dde16ec99f06"},"useSeparator":"auto"},{"content":{"params":{"media":{"disableImageZooming":false},"answers":[{"correct":true,"tipsAndFeedback":{"tip":"","chosenFeedback":"","notChosenFeedback":""},"text":"<div>captures</div>\n"},{"correct":false,"tipsAndFeedback":{"tip":"","chosenFeedback":"","notChosenFeedback":""},"text":"<div>raspistill</div>\n"},{"correct":false,"tipsAndFeedback":{"tip":"","chosenFeedback":"","notChosenFeedback":""},"text":"<div>greyworld</div>\n"}],"overallFeedback":[{"from":0,"to":100}],"behaviour":{"enableRetry":true,"enableSolutionsButton":true,"enableCheckButton":true,"type":"auto","singlePoint":false,"randomAnswers":true,"showSolutionsRequiresInput":true,"confirmCheckDialog":false,"confirmRetryDialog":false,"autoCheck":false,"passPercentage":100,"showScorePoints":true},"UI":{"checkAnswerButton":"Check","submitAnswerButton":"Submit","showSolutionButton":"Show solution","tryAgainButton":"Retry","tipsLabel":"Show tip","scoreBarLabel":"You got :num out of :total points","tipAvailable":"Tip available","feedbackAvailable":"Feedback available","readFeedback":"Read feedback","wrongAnswer":"Wrong answer","correctAnswer":"Correct answer","shouldCheck":"Should have been checked","shouldNotCheck":"Should not have been checked","noInput":"Please answer before viewing the solution","a11yCheck":"Check the answers. The responses will be marked as correct, incorrect, or unanswered.","a11yShowSolution":"Show the solution. The task will be marked with its correct solution.","a11yRetry":"Retry the task. Reset all responses and start the task over again."},"confirmCheck":{"header":"Finish ?","body":"Are you sure you wish to finish ?","cancelLabel":"Cancel","confirmLabel":"Finish"},"confirmRetry":{"header":"Retry ?","body":"Are you sure you wish to retry ?","cancelLabel":"Cancel","confirmLabel":"Confirm"},"question":"<p>What directory will the images be saved in?</p>\n"},"library":"H5P.MultiChoice 1.16","metadata":{"contentType":"Multiple Choice","license":"U","title":"saving images","authors":[],"changes":[],"extraTitle":"saving images"},"subContentId":"1920e2a2-99cf-4e5d-a17c-b7c2ea937fa4"},"useSeparator":"auto"}]},"library":"H5P.Column 1.15","subContentId":"187c3436-adb1-4890-9af8-333665d0e29f","metadata":{"contentType":"Column","license":"U","title":"Capturing Footage","authors":[],"changes":[],"extraTitle":"Capturing Footage"}},{"params":{"content":[{"content":{"params":{"text":"<p> </p>\n\n<p><span style=\"font-size:1.5em\">Get the images off the Pi</span></p>\n\n<p>The photos you just took have been stored on the Pi in a directory called 'captures'. To get the training images you captured off the Pi, we will need to use a software called Cyberduck.</p>\n\n<p><span style=\"font-size:1.5em\">SFTP and Cyberduck</span></p>\n\n<p>SFTP (<a href=\"https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol\">Secure File Transfer Protocol</a>) is a way to access the pi’s filesystem through SSH. To connect to our pi this way, we will be using <a href=\"https://cyberduck.io/\">Cyberduck</a>. Cyberduck will allow us to view the pi’s filesystem in the same way as we view the local file system on our computer. First, you will need to install Cyberduck from <a href=\"https://cyberduck.io/\" target=\"_blank\">here</a>.</p>\n\n<p>Open Cyberduck and click of the Open Connection button (picture 1), this will bring up a menu go setup the connection (picture 2).</p>\n\n<ul>\n\t<li>Select <code>SFTP (SSH File Transfer Protocol)</code> in the top drop-down menu.</li>\n\t<li>Enter the IP address of the raspberry pi that you got in the last section from running <code>hostname -I</code>. You can leave the port unchanged.</li>\n\t<li>Enter the username for the pi, which should be <code>pi</code> (unless you’ve changed it).</li>\n\t<li>Enter the password for the pi, which should be <code>raspberry</code> (unless you’ve changed it).</li>\n\t<li>Make sure the <code>SSH Private Key</code> is set to <code>None</code></li>\n\t<li>Click <code>connect</code>!</li>\n</ul>\n\n<p>Once you click connect, it might take a while to mount. Once it’s mounted you should see be able to see the raspberry pi’s home directory. Open the Pi's directory and right-click on the 'captures' folder, then select 'Download'. You will be prompted about an unkown fingerprint, press 'allow' and the folder should now download onto your computer.</p>\n\n<p><span style=\"font-size:1.25em\">Cyberduck Pictures</span></p>\n"},"library":"H5P.AdvancedText 1.1","metadata":{"contentType":"Text","license":"U","title":"Untitled Text","authors":[],"changes":[]},"subContentId":"be4a23e2-8ae1-4f70-be2e-f8557b84479d"},"useSeparator":"auto"},{"content":{"library":"H5P.ImageSlider 1.1","params":{"imageSlides":[{"params":{"image":{"params":{"decorative":false,"contentName":"Image","alt":"Cyberduck opening screen","file":{"path":"images/file-aZveKjv8.png","mime":"image/png","copyright":{"license":"U"},"width":2880,"height":1800}},"library":"H5P.Image 1.1","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]},"subContentId":"d4061044-1d42-4063-a2e6-defc1fe98b61"}},"library":"H5P.ImageSlide 1.1","metadata":{"contentType":"Image Slide","license":"U","title":"first step","authors":[],"changes":[],"extraTitle":"first step"},"subContentId":"7d67e4ff-c35a-43f0-80fb-d69f58538526"},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-AmNgTc5w.png","mime":"image/png","copyright":{"license":"U"},"width":2880,"height":1800},"alt":"connection window"},"library":"H5P.Image 1.1","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]},"subContentId":"60ffff62-e89e-46f2-bc1b-8b0617b3effc"}},"library":"H5P.ImageSlide 1.1","metadata":{"contentType":"Image Slide","license":"U","title":"Cyberduck connection settings","authors":[],"changes":[],"extraTitle":"Cyberduck connection settings"},"subContentId":"dd56cc3e-91fd-4cdc-9920-a91b973948fd"},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-3BbuuYOL.png","mime":"image/png","copyright":{"license":"U"},"width":1163,"height":794},"alt":"Pi home directory on cyberduck"},"library":"H5P.Image 1.1","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]},"subContentId":"1dcc23b3-893a-445c-bf8f-8954d9cac4c6"}},"library":"H5P.ImageSlide 1.1","metadata":{"contentType":"Image Slide","license":"U","title":"Cyberduck home directory","authors":[],"changes":[],"extraTitle":"Cyberduck home directory"},"subContentId":"7e365166-82d7-4c1a-a6b5-a436897e8db8"},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-W8pBVFgt.png","mime":"image/png","copyright":{"license":"U"},"width":820,"height":437,"originalImage":{"path":"images/file-dGOCFF1X.png","mime":"image/png","height":1080,"width":1920}},"alt":"download menu after right-clicking on captures folder"},"library":"H5P.Image 1.1","subContentId":"476b602e-0588-4ff8-bb03-0c99ed0a9d70","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"2d6d2e17-51c1-4c8a-93fb-5ed92d7249ee","metadata":{"contentType":"Image Slide","license":"U","title":"download captures","authors":[],"changes":[],"extraTitle":"download captures"}},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-4BRfxNIn.png","mime":"image/png","copyright":{"license":"U"},"width":820,"height":435,"originalImage":{"path":"images/file-rlk4DkeR.png","mime":"image/png","height":1080,"width":1920}},"alt":"Pop-up window to allow download"},"library":"H5P.Image 1.1","subContentId":"b46523cb-b8ab-4f9b-95bc-a80acf6394c8","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"9d89c7d2-4161-4210-9ca2-6ea768be5fd8","metadata":{"contentType":"Image Slide","license":"U","title":"Untitled Image Slide","authors":[],"changes":[],"extraTitle":"Untitled Image Slide"}}],"aspectRatioMode":"auto","aspectRatio":{"aspectWidth":4,"aspectHeight":3},"a11y":{"nextSlide":"Next Image","prevSlide":"Previous Image","gotoSlide":"Go to image %slide"}},"metadata":{"title":"Cyberduck tutorial","license":"U","defaultLanguage":"en","contentType":"Image Slider","authors":[],"changes":[],"extraTitle":"Cyberduck tutorial"},"subContentId":"3b14463f-c9d7-4cf2-90ea-e67a65858c40"},"useSeparator":"auto"}]},"library":"H5P.Column 1.15","subContentId":"54b2dd7c-cb7b-4f7c-ba26-8a51e08ea5c0","metadata":{"contentType":"Column","license":"U","title":"Getting Images off the Pi","authors":[],"changes":[],"extraTitle":"Getting Images off the Pi"}},{"params":{"content":[{"useSeparator":"auto","content":{"params":{"text":"<p> </p>\n\n<p><span style=\"font-size:1.5em\">Separate the images into “yes” and “no” categories.</span></p>\n\n<p>Open the downloaded pictures on your computer and look through them, sorting them into the different categories you're trying to detect (for example, if you are trying to detect a person, separate the images containing a person and the ones that aren't). For the next step, it's easiest if the separated photos are stored in different folders.</p>\n\n<p>Now we can use these photos to train our new model!</p>\n\n<p><span style=\"font-size:1.5em\">Transfer Learning</span></p>\n\n<p>Creating a enitrely new model requires a deep understanding of the underlying mechanics and thousands of images. However, if we use a technique called <a href=\"https://youtu.be/kRpZ5OqUY6Y\">“transfer learning”</a> we can adjust an existing model to perform a specialised task. Watch the first six minutes of <a href=\"https://youtu.be/kRpZ5OqUY6Y\">this video</a> to get an idea of what we will be doing.</p>\n\n<p><span style=\"font-size:1.5em\">Teachable Machine</span></p>\n\n<p>To train the model, we'll be using the website <a href=\"https://teachablemachine.withgoogle.com/train/image\" target=\"_blank\">teachable machine</a>. After clicking on the link:</p>\n\n<p>1. Rename Class 1 and Class 2 to the things your model is trying to detect. </p>\n\n<p>2. Upload your photos to the Class it belongs to (for example, if you want to detect a person, name one of the classes 'person' and add the photos that contain a person to that class).</p>\n\n<p>3. Press 'Train Model'.</p>\n\n<p>4. Press 'Export Model'.</p>\n\n<p>5. Click on Tensorflow Lite at the top of the pop-up window, and change Model conversion type to 'Quantized'. Press 'Download my model'.</p>\n\n<p>This will download a zip file containing 2 files:</p>\n\n<ul>\n\t<li><code>labels.txt</code>: A file that puts a label onto the category numbers that come out from the model</li>\n\t<li><code>model.tflite</code>: The layers of tensors that run in the interpreter.</li>\n</ul>\n\n<p>Unzip This file by right-clicking it and selecting 'Extract all'.</p>\n"},"library":"H5P.AdvancedText 1.1","metadata":{"contentType":"Text","license":"U","title":"Untitled Text","authors":[],"changes":[]},"subContentId":"293d6cf9-0232-4a81-a1ac-74291d0589e8"}},{"content":{"params":{"imageSlides":[{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-spmA0xEF.png","mime":"image/png","copyright":{"license":"U"},"width":1914,"height":981},"alt":"Teachable machine webstie"},"library":"H5P.Image 1.1","subContentId":"690e4842-7cbd-4594-919e-8a3b69f5820a","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"6de583fa-c475-4fd4-b9ed-541072468f86","metadata":{"contentType":"Image Slide","license":"U","title":"Untitled Image Slide","authors":[],"changes":[],"extraTitle":"Untitled Image Slide"}},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-osOSBKSZ.png","mime":"image/png","copyright":{"license":"U"},"width":820,"height":421,"originalImage":{"path":"images/file-dt8erZnF.png","mime":"image/png","height":1080,"width":1920}},"alt":"images have been uploaded"},"library":"H5P.Image 1.1","subContentId":"211b7ed0-5a89-4b28-bfa5-f8fc3dcc48d7","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"13c7afa8-9f7c-4089-a5cf-0fb3221a3c98","metadata":{"contentType":"Image Slide","license":"U","title":"Upload images","authors":[],"changes":[],"extraTitle":"Upload images"}},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-TI9TeeJR.png","mime":"image/png","copyright":{"license":"U"},"width":820,"height":403,"originalImage":{"path":"images/file-k5Vg0iIT.png","mime":"image/png","height":1080,"width":1920}},"alt":"Model has finished training"},"library":"H5P.Image 1.1","subContentId":"0d06260d-c202-4120-ae7b-8e46bed07d8f","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"6d6d10a6-7c8a-4ab3-9173-211f50cc991e","metadata":{"contentType":"Image Slide","license":"U","title":"Export model","authors":[],"changes":[],"extraTitle":"Export model"}},{"params":{"image":{"params":{"decorative":false,"contentName":"Image","file":{"path":"images/file-PNntn8Nf.png","mime":"image/png","copyright":{"license":"U"},"width":820,"height":420,"originalImage":{"path":"images/file-6HGrwZ6K.png","mime":"image/png","height":1080,"width":1920}},"alt":"Export settings"},"library":"H5P.Image 1.1","subContentId":"e4187569-c21c-48f9-b630-7fc66a65e8db","metadata":{"contentType":"Image","license":"U","title":"Untitled Image","authors":[],"changes":[]}}},"library":"H5P.ImageSlide 1.1","subContentId":"73b0308c-6687-4885-8d2e-4fd32ad4cb1f","metadata":{"contentType":"Image Slide","license":"U","title":"Export settings","authors":[],"changes":[],"extraTitle":"Export settings"}}],"aspectRatioMode":"auto","aspectRatio":{"aspectWidth":4,"aspectHeight":3},"a11y":{"nextSlide":"Next Image","prevSlide":"Previous Image","gotoSlide":"Go to image %slide"}},"library":"H5P.ImageSlider 1.1","metadata":{"contentType":"Image Slider","license":"U","title":"Teachable Machine","authors":[],"changes":[],"extraTitle":"Teachable Machine"},"subContentId":"35835862-5d1b-4823-a3d6-534e52b60c9b"},"useSeparator":"auto"}]},"library":"H5P.Column 1.15","subContentId":"81c178a5-6c6b-4f49-b32b-806da62f8426","metadata":{"contentType":"Column","license":"U","title":"Teachable machine","authors":[],"changes":[],"extraTitle":"Teachable machine"}}],"behaviour":{"defaultTableOfContents":true,"progressIndicators":true,"progressAuto":true,"displaySummary":true,"baseColor":"#1768c4"},"read":"Read","displayTOC":"Display &#039;Table of contents&#039;","hideTOC":"Hide &#039;Table of contents&#039;","nextPage":"Next page","previousPage":"Previous page","chapterCompleted":"Page completed!","partCompleted":"@pages of @total completed","incompleteChapter":"Incomplete page","navigateToTop":"Navigate to the top","markAsFinished":"I have finished this page","fullscreen":"Fullscreen","exitFullscreen":"Exit fullscreen","bookProgressSubtext":"@count of @total pages","interactionsProgressSubtext":"@count of @total interactions","submitReport":"Submit Report","restartLabel":"Restart","summaryHeader":"Summary","allInteractions":"All interactions","unansweredInteractions":"Unanswered interactions","scoreText":"@score / @maxscore","leftOutOfTotalCompleted":"@left of @max interactions completed","noInteractions":"No interactions","score":"Score","summaryAndSubmit":"Summary &amp; submit","noChapterInteractionBoldText":"You have not interacted with any pages.","noChapterInteractionText":"You have to interact with at least one page before you can see the summary.","yourAnswersAreSubmittedForReview":"Your answers are submitted for review!","bookProgress":"Book progress","interactionsProgress":"Interactions progress","totalScoreLabel":"Total score","a11y":{"progress":"Page @page of @total.","menu":"Toggle navigation menu"}}